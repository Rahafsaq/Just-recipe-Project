<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>بس وصفة</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
			crossorigin="anonymous"
		/>
		<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
		<style>
			.logo-img {
				width: 14vw;
			}
			.circle-1 {
				background-color: #799d53;
				width: 15vw;
				height: 6vh;
				color: white;
				flex-direction: row-reverse;
				text-align: center;
				justify-content: end;
                align-items: center;
				border-radius: 20px;
				margin-right: 10px;
			}
			.selection-circles {
				justify-content: end;
				align-items: center;
				gap: 8px;
				/* margin-right: 8px; */
				background-color: #e8e8e4;
				width: 65vw;
				height: 20vh;
			}
			.component-section {
				flex-direction: row-reverse;
				gap: 50px;
				width: 96%;
			}
			.btn {
				height: 20vh;
				width: 12vw;
				background-color: #e8e8e4;
				color: #547361;
				border-radius: 0%;
				border: none;
				direction: rtl;
				font-size: 20px;
			}
			.change-width {
				/* background-color: aqua; */
				width: 8vw;
				display: flex;
				flex-direction: row-reverse;
				justify-content: space-between;
				margin-right: 10px;
			}
			.dropdown-menu {
				background-color: #d9d9d9;
				text-align: center;
				border: 1px solid #547361;
			}
			.dropdown-item {
				border: 1px solid #547361;
				color: #547361;
			}
			.dropdown-green-item {
				justify-content: center;
				flex-direction: row-reverse;
				border: 1px solid #547361;
				color: #547361;
				background-color: #799d53;
				color: white;
			}
			hr {
				border: 1px solid black;
			}
			.last-3-buttons-container {
				display: flex;
				flex-direction: row-reverse;
				justify-content: center;
			}
			.last-3-buttons {
				gap: 80px;
				justify-content: center;
				flex-direction: row-reverse;
				align-items: center;
				height: 25vh;
			}
			.btn-3 {
				height: 10vh;
				width: 15vw;
				background-color: #e8e8e4;
				color: #547361;
				border-radius: 0%;
				border: none;
				direction: rtl;
				font-size: 20px;
				display: flex;
				flex-direction: row-reverse;
				justify-content: center;
				align-items: center;
				gap: 5px;
			}
			.button-make-recipe {
				display: flex;
				justify-content: center;
			}
			.button-make-recipe-circle {
				background-color: #8d3333;
				width: 20vw;
				height: 7vh;
				color: white;
				flex-direction: row-reverse;
				text-align: center;
				justify-content: end;
				border-radius: 20px;
				border: none;
				margin-bottom: 30px;
				font-size: 20px;
			}
			.material-symbols-outlined-fire {
				color: orange;
			}
			.material-symbols-outlined-snow {
				color: blue;
			}
		</style>
	</head>
	<body>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
			crossorigin="anonymous"
		></script>
		<div class="logo-img-container d-flex justify-content-between ms-3" style="height: 20vh; width: 100%">
			<img class="logo-img" src="images\logo.png" alt="" />
			<img class="logo-img" src="images\yellow.png" alt="" />
		</div>

		<h5 class="top-h5 mt-5 pe-5" style="text-align: end; color: #547361">:اختر المكونات التي تفضلها</h5>

		<div class="component-section d-flex mt-5">
			<div class="dropdown">
				<button
					class="btn btn-secondary dropdown-toggle"
					type="button"
					data-bs-toggle="dropdown"
					aria-expanded="false"
				>
					خضروات
				</button>
				<ul class="dropdown-menu" id="vegetables-list">
					<li><a class="dropdown-item" href="#">خس</a></li>
					<li>
						<a class="dropdown-item" href="#">طماطم</a>
					</li>
					<li>
						<a class="dropdown-item" href="#">خيار</a>
					</li>
					<li><a class="dropdown-item" href="#">جزر</a></li>
					<li>
						<!-- <input type="text" placeholder="اخرى" /> -->
                        <input type="text" placeholder="اخرى" id="vegetables-other-input" />
                        <button class="add-button" onclick="addItem('vegetables-list', 'vegetables-other-input', 'vegetables-selections')">إضافة</button>
						
					</li>
				</ul>
			</div>
			<div>
				<div class="selection-cercel">
					<div class="selection-circles d-flex" id="vegetables-selections">
						</div>
					</div>
				</div>
			</div>
		</div>
        <!--  -->
		<div class="component-section d-flex mt-5">
			<div class="dropdown">
				<button
					class="btn btn-secondary dropdown-toggle"
					type="button"
					data-bs-toggle="dropdown"
					aria-expanded="false"
				>
					نشويات
				</button>
				<ul class="dropdown-menu" id="starches-list">
					<li><a class="dropdown-item" href="#">رز</a></li>
					<li>
						<a class="dropdown-item" href="#">مكرونة</a>
					</li>
					<li>
						<a class="dropdown-item" href="#">خبز</a>
					</li>
					<li>
                        <input type="text" placeholder="اخرى" id="starches-other-input" />
                        <button class="add-button" onclick="addItem('starches-list', 'starches-other-input', 'starches-selections')">إضافة</button>
						
					</li>
				</ul>
			</div>
			<div>
				<div class="selection-cercel">
					<div class="selection-circles d-flex" id="starches-selections">
					</div>
				</div>
			</div>
		</div>

		<div class="component-section d-flex mt-5">
			<div class="dropdown">
				<button
					class="btn btn-secondary dropdown-toggle"
					type="button"
					data-bs-toggle="dropdown"
					aria-expanded="false"
				>
					فواكة
				</button>
				<ul class="dropdown-menu" id="fruit-list">
					<li><a class="dropdown-item" href="#">عنب</a></li>
					<li>
						<a class="dropdown-item" href="#">تفاح</a>
					</li>
					<li><a class="dropdown-item" href="#">موز</a></li>
					<li><a class="dropdown-item" href="#">توت</a></li>

					<li>
						<input type="text" placeholder="اخرى" id="fruit-other-input" />
						<button class="add-button" onclick="addItem('fruit-list', 'fruit-other-input', 'fruit-selections')">إضافة</button>
                        
					</li>
				</ul>
			</div>
			<div>
				<div class="selection-cercel">
					<div class="selection-circles d-flex" id="fruit-selections">
					</div>
				</div>
			</div>
		</div>
		<div class="component-section d-flex mt-5">
			<div class="dropdown">
				<button
					class="btn btn-secondary dropdown-toggle"
					type="button"
					data-bs-toggle="dropdown"
					aria-expanded="false"
				>
					بقوليات
				</button>
				<ul class="dropdown-menu" id="legumes-list">
					<li><a class="dropdown-item" href="#">عدس</a></li>
					<li>
						<a class="dropdown-item" href="#">فول</a>
					</li>
					<li>
						<a class="dropdown-item" href="#">فاصوليا</a>
					</li>
					<li><a class="dropdown-item" href="#">حمص</a></li>

					<li>
						<input type="text" placeholder=" اخرى" id="legumes-other-input" />
						<button class="add-button" onclick="addItem('legumes-list', 'legumes-other-input', 'legumes-selections')">إضافة</button>
					</li>
				</ul>
			</div>
			<div>
				<div class="selection-cercel">
					<div class="selection-circles d-flex" id="legumes-selections">
					</div>
				</div>
			</div>
		</div>
		<div class="component-section d-flex mt-5">
			<div class="dropdown">
				<button
					class="btn btn-secondary dropdown-toggle"
					type="button"
					data-bs-toggle="dropdown"
					aria-expanded="false"
				>
					بروتينات
				</button>
				<ul class="dropdown-menu" id="proteins-list">
					<li><a class="dropdown-item" href="#">لحم</a></li>
					<li>
						<a class="dropdown-item" href="#">دجاج</a>
					</li>
					<li><a class="dropdown-item" href="#">سمك</a></li>
					<li><a class="dropdown-item" href="#">بيض</a></li>

					<li>
						<input type="text" placeholder=" اخرى" id="proteins-other-input" />
						<button class="add-button" onclick="addItem('proteins-list', 'proteins-other-input', 'proteins-selections')">إضافة</button>
					  

						<!-- <a class="dropdown-green-item d-flex" href="#"><i class="material-icons">add</i>اخرى</a> -->
					</li>
				</ul>
			</div>
			<div>
				<div class="selection-cercel">
					<div class="selection-circles d-flex" id="proteins-selections">
						<!-- <div class="circle-1 d-flex">
							<div class="change-width"><i class="material-icons">clear</i>دجاج</div>
						</div> -->
					</div>
				</div>
			</div>
		</div>
		<hr />
		<h5 class="top-h5 mt-5 pe-5" style="text-align: end; color: #547361">هل تريد ان تكون الوصفة</h5>
		<div class="last-3-buttons-container">
			<div class="last-3-buttons d-flex">
				<button type="button" class="btn-3">
					<i class="material-icons"
						><span class="material-symbols-outlined-fire"> local_fire_department </span></i
					>ساخنة
				</button>
				<button type="button" class="btn-3">
					<i class="material-icons"
						><span class="material-symbols-outlined">
							<span class="material-symbols-outlined-snow"> ac_unit </span>
						</span></i
					>باردة
				</button>
				<button type="button" class="btn-3">الكل</button>
			</div>
		</div>

		<div class="button-make-recipe">
			<a href=""><button id="makeRecipeButton" class="button-make-recipe-circle" type="button" onclick="makeRecipe()">اصنع لي وصفة</button> </a>
		</div>
		<script>
			function addItem(listId, inputId, circlesId) {
			  var list = document.getElementById(listId);
			  var input = document.getElementById(inputId);
			  var circles = document.getElementById(circlesId);
		
			  if (input.value.trim() !== '') {
				// Create a circle element for the entered item
				var circle = document.createElement('div');
				circle.className = 'circle-1 d-flex';
				circle.innerHTML =
				  '<div class="change-width"><i class="material-icons delete-icon">clear</i>' +
				  input.value +
				  '</div>';
		
				// Add the circle to the circles container
				circles.appendChild(circle);
		
				// Clear the input
				input.value = '';
		
				// Send data to MockAPI
				sendDataToMockAPI(circlesId);
			  }
			}
		
			function sendDataToMockAPI(circlesId) {
			  var circles = document.getElementById(circlesId);
			  var items = Array.from(circles.children).map(function (circle) {
				return circle.textContent.trim();
			  });
		
			  // Send a POST request to the MockAPI endpoint
			  fetch('https://655634ee84b36e3a431f57d3.mockapi.io/recipe-info', {
				method: 'POST',
				headers: {
				  'Content-Type': 'application/json',
				},
				body: JSON.stringify({ items: items }),
			  })
				.then(response => response.json())
				.then(data => console.log('Data sent to MockAPI:', data))
				.catch(error => console.error('Error sending data to MockAPI:', error));
			}
		
			document.addEventListener('DOMContentLoaded', function () {
			  // Function to handle changes in the dropdowns
			  function handleDropdownChange(listId, circlesId) {
				var list = document.getElementById(listId);
				var circles = document.getElementById(circlesId);
		
				list.addEventListener('click', function (event) {
				  var target = event.target;
		
				  if (target.classList.contains('dropdown-item')) {
					// Create a circle element for the selected item
					var circle = document.createElement('div');
					circle.className = 'circle-1 d-flex';
					circle.innerHTML =
					  '<div class="change-width"><i class="material-icons delete-icon">clear</i>' +
					  target.innerText +
					  '</div>';
		
					// Add the circle to the circles container
					circles.appendChild(circle);
		
					// Send data to MockAPI
					sendDataToMockAPI(circlesId);
				  }
				});
			  }
		
			  // Function to handle deleting circles
			  function handleCircleDeletion(circlesId) {
				var circles = document.getElementById(circlesId);
		
				circles.addEventListener('click', function (event) {
				  var target = event.target;
		
				  if (target.classList.contains('delete-icon')) {
					// Remove the parent circle when the delete icon is clicked
					var circle = target.closest('.circle-1');
					if (circle) {
					  circle.remove();
		
					  // Send data to MockAPI after deletion
					  sendDataToMockAPI(circlesId);
					}
				  }
				});
			  }
		
			  // Attach event listeners for each dropdown and circle container
			  handleDropdownChange('vegetables-list', 'vegetables-selections');
			  handleDropdownChange('starches-list', 'starches-selections');
			  handleDropdownChange('fruit-list', 'fruit-selections');
			  handleDropdownChange('legumes-list', 'legumes-selections');
			  handleDropdownChange('proteins-list', 'proteins-selections');
		
			  // Attach event listener for circle deletion
			  handleCircleDeletion('vegetables-selections');
			  handleCircleDeletion('starches-selections');
			  handleCircleDeletion('fruit-selections');
			  handleCircleDeletion('legumes-selections');
			  handleCircleDeletion('proteins-selections');
			});
		  </script>
	</body>
</html>
